FROM golang:1.22-alpine AS builder

WORKDIR /src
COPY main.go go.* /src/
RUN CGO_ENABLED=0 go build -o /bin/api

FROM scratch
COPY --from=builder /bin/api /bin/api
EXPOSE 8080
ENTRYPOINT ["/bin/api"]